<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="jakarta.faces.html"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:f="jakarta.faces.core"
                template="/WEB-INF/template/main.xhtml">

    <f:metadata>
        <f:viewAction action="#{songCreate.init()}"/>
    </f:metadata>

    <ui:define name="content">
        <article>
            <header><h2>#{messages['song.createheader']}</h2></header>
            <h:form styleClass="container" onreset="onReset()" enctype="multipart/form-data">

            <div class="row">
                <div class="col-4 p-2">
                    <div class="form-outline">
                        <h:inputText id="name" value="#{songCreate.song.name}"                   
                        binding="#{nameInput}"
                        styleClass="#{nameInput.valid ? 'form-control' : 'is-invalid form-control'}">
               <!-- <f:validateBean
                       validationGroups="lab.song.validation.group.SongModelGroup, jakarta.validation.groups.Default"/> -->
                    </h:inputText>
                        <h:outputLabel for="name" value="#{messages['name']}:" styleClass="form-label"/>
                        <h:message for="name" styleClass="invalid-feedback"/>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-4 p-2">
                    <div class="form-outline">
                        <h:inputText id="duration" value="#{songCreate.song.duration}"                   
                        binding="#{durationInput}"
                        styleClass="#{durationInput.valid ? 'form-control' : 'is-invalid form-control'}">
                        <!-- <f:validateBean
                            validationGroups="lab.song.validation.group.SongModelGroup, jakarta.validation.groups.Default"/> -->
                        </h:inputText>

                        <h:outputLabel for="duration" value="#{messages['song.duration']}:" styleClass="form-label"/>
                        <h:message for="duration" styleClass="invalid-feedback"/>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-4 p-2">
                    <div class="form-outline">
                        <h:inputText id="rating" value="#{songCreateModel.rating}" 
                            binding="#{ratingInput}"
                            styleClass="#{ratingInput.valid ? 'form-control' : 'is-invalid form-control'}">
                        <f:validateBean
                            validationGroups="lab.song.validation.group.SongModelGroup, jakarta.validation.groups.Default"/>
                        </h:inputText>
                        <h:outputLabel for="rating" value="#{messages['song.rating']}:" styleClass="form-label"/>
                        <h:message for="rating" styleClass="invalid-feedback"/>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-4 p-2">
                    <div class="form-outline">
                        <h:selectOneMenu value = "#{songCreate.song.album}" styleClass="form-control active"> 
                            <f:selectItems value="#{songCreate.albums}" var="album" itemLabel="#{album.name}"/>
                        </h:selectOneMenu>  
                        <h:outputLabel for="album" value="#{messages['album']}:" styleClass="form-label"/>
                        <h:message for="album" styleClass="invalid-feedback"/>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-4 p-2">
                    <h:message styleClass="text-danger" for="song"/>
                </div>
            </div>


                <div class="row">
                    <div class="col-2 p-2 text-center">
                        <h:commandButton styleClass="btn btn-secondary" value="#{messages['create']}"
                                         action="#{songCreate.saveAction()}"/>
                    </div>
                    <div class="col-2 p-2 text-center">
                        <h:commandButton styleClass="btn btn-secondary" value="#{messages['cancel']}"
                                         action="#{songCreate.cancelAction()}"/>
                    </div>
                </div>

                <f:validateWholeBean id="song" value="#{songCreateModel}"
                validationGroups="lab.song.validation.group.SongModelGroup"/>
            </h:form>
        </article>
    </ui:define>

</ui:composition>
